MVC 即 Model、View、Controller。

# 架构思维

## 组件化内聚

所谓组件內聚，即所有组件所需都集中组织，高耦合结构。

```Plain Text
+ pages
  + home
    - index.tsx
    - index.d.ts
    - index.css
    - api.ts
    - model.ts   // Modal 数据层
    + components // 可能存在的子组件
```

## MVC 「Model View Controller」

常提及的不予多余介绍。

## BBF「Backend For Frontend」

通常情况下指的是在前端与后端之间设计一个**中间层**，用于处理前后端之间数据的差异。

比较好的做法就是在前后端之间做一个 node 中间层，来将对数据处理从前端页面剥离出去。

🥚是，也存在一些问题：

1. 沟通成本高

2. 维护成本高

3. 前端边缘化

4. 灵活性不足

因此，通常我们采用 MVC + BBF 的方式，也就是在前端自己构建一层 Cotroller 层。

`Controller` 层通常用于处理以下逻辑：

1. 验证数据字段内容与类型是否符合预期

2. 验证安全性等其他额外逻辑

3. 二次处理，整理成为应用层需要的结构

最终的目的还是确保**数据是唯一来源且即拿即用**。

> 数据校验可通过 Zod 实现。

## 组件拆分原则

1. 总分总原则

2. 拆分目的：提高可读性和维护性

3. 拆分单位：需要能提炼出明确的语义

4. 异步组件基础标准：Loading 与 组件是一对一的关系

> 刚开始，如果你还无法把控是否复杂的具体粒度，可以通过一个简单的规定来约束：一个文件的代码不能超过 200 行，如果超过了，就需要考虑拆分

# 实战

## 流式渲染

利用 Suspense 嵌套实现。

## 多接口并行

通过自定义 Controller 层，Promise.all 实现。





